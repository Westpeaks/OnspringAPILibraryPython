# Onspring API Python Library

This library builds on the Python Requests library to further abstract the Requests library and make working with the Onspring API more accessible via Python. It provides a simplified path for Onspring customers to integrate with an organization's OnSpring instance.

## Installation

To install and use the library, clone this repo and reference two main files, the **onspring_api_library_v2.py** file and **client_code_examples.py**.

_Important_

- The **onspring_api_library_v2.py** contains a class called _Onspring_ for all of the requests. The requests are built using a series of constructors and then utillized via a series of prebuilt methods. This allows the developer to make requests using much less syntax.
- What must be obtained prior to the utilization of this library is an API key from an Onspring instance.

## Obtaining an API Key

Interacting with the Onspring API requires a generated key. Keys can be generated by an Onspring user who has been granted the appropriate permissions. This is typically an admin user. To generate a key:

1. In Onspring, navigate to Administration> Security> API Keys.
2. On the list page, select to create a new key or click on an existing one.
3. On the details page, expand the **Developer Information** section. Copy the **X-ApiKey Header**.

_Important_

- The API Key must also have a status of enabled within the Onspring interface. This option can be found within the details page for the particular API Key.
- Each API Key within Onspring is associated with a role for security measures. The permissions given to the associated role will determine what request types can be made. If a particular request is made and the API Key does not have sufficient permissions assigned, an error will be returned.

## Initial Setup and Coding Examples

This library requires two Python dependencies before getting started, **requests** and **json**. Both can be obtained via a common Pyhton package manager such as Pip.

Once the appropriate packages have been installed, everything needed to begin can be found in the **client_code_examples.py** file. Although a basic understanding of Onspring and its data input requirements is not entirely required, it is greatly recommended. Also, access to an Onspring instance is beneficial for data validation.

To get started:

1. Create a .py file.
2. Import **requests** and the _OnSpring_ class from the **onpsring_api_library_v2.py** file.
3. You will then need to build an Onspring object to make API calls. Its constructor will require two parameter inputs:

   - The Onspring API base URL which is https://api.onspring.com/
   - The generated API key from the Onspring instance.

Here is an example of what this should look like:

```python
import requests

from onspring_api_library_v2 import Onspring

api = Onspring('https://api.onspring.com/','This is where you would insert your api key')
```

Once the Onspring object is built, you can then append calls to it and make standard rest API calls to gather data from an Onspring instance:

```python
import requests

from onspring_api_library_v2 import Onspring

api = Onspring('https://api.onspring.com/','000000ffffff000000ffffff/00000000-ffff-0000-ffff-000000000000')

app_id = 24
record_id = 126

record = api.get_app_record(app_id, record_id)

print(record)

```

For a full list of API calls and assistance determining which values to pass as parameters, please consult the [Onspring v2 API Administrator Guide](https://software.onspring.com/hubfs/Training/Admin%20Guide%20-%20v2%20API.pdf). All examples of calls in pythonic syntax are listed in the **client_code_examples.py** file and can be copied and pasted into the project you are working on. The included **OnspringAPI.pdf** from this repo will also provide good examples of what expected returns will look like.

Let's take a look at a couple of examples. To provide a conceptual framework for interacting with the Onspring API, the basic structure within Onspring consists of a series of interelated databases (in Onspring, these are called apps) and within those databases, each row represents a record (each column is a field and each row is a record). Calls will return JSON.

Here is an example of getting all fields within an applicaiton:

```python
import requests

from onspring_api_library_v2 import Onspring

api = Onspring('https://api.onspring.com/','000000ffffff000000ffffff/00000000-ffff-0000-ffff-000000000000')

app_id = 24

app_fields = api.get_fields(app_id)

print (app_fields)

```

Now, as a last example, let's add to this by getting the records associated with those fields for the same application:

```python
import requests

from onspring_api_library_v2 import Onspring

api = Onspring('https://api.onspring.com/','000000ffffff000000ffffff/00000000-ffff-0000-ffff-000000000000')

app_id = 24

all_records = api.get_app_records(app_id)

print (all_records)

```

Feel free to reach out and let me know about potential additions and revisions. Thank you and happy coding!
